# 📱 手机适配指南

## 🎯 手机优化功能

### 📷 摄像头适配
- **自动检测移动设备**：优化摄像头参数
- **前置摄像头**：默认使用前置摄像头进行手势识别
- **降低分辨率**：手机使用 480x640，提高性能
- **降低帧率**：15-30fps，减少电池消耗

### 👆 触摸交互
- **备用方案**：如果摄像头不可用，支持点击屏幕切换效果
- **防误触**：禁用页面滚动和缩放
- **全屏体验**：固定定位，防止地址栏干扰

### 🔄 响应式设计
- **字体缩放**：小屏幕自动调整字体大小
- **布局优化**：按钮和提示适配手机屏幕
- **横屏警告**：建议竖屏使用以获得最佳体验

## 📋 手机使用说明

### 1. 摄像头权限
```
首次访问 → 浏览器请求摄像头权限 → 点击"允许"
```

### 2. 手势识别（推荐）
- **握拳/指向** → 显示圣诞树
- **张开手掌** → 粒子爆炸 + 照片展示
- 确保手部在前置摄像头视野内
- 保持良好光线条件

### 3. 触摸交互（备用）
- 如果摄像头不可用，点击屏幕切换效果
- 每次点击在两种状态间切换

## 🔧 技术实现

### 设备检测
```javascript
const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
```

### 摄像头配置
```javascript
const constraints = {
  video: {
    width: { ideal: isMobile ? 480 : 640 },
    height: { ideal: isMobile ? 640 : 480 },
    facingMode: 'user', // 前置摄像头
    frameRate: { ideal: 15, max: 30 }
  }
};
```

### 触摸事件
```javascript
onClick={handleTouchInteraction}
onTouchStart={handleTouchInteraction}
```

## 🚀 部署注意事项

### HTTPS 要求
- 手机摄像头访问**必须**在 HTTPS 环境下
- GitHub Pages 自动提供 HTTPS
- 本地测试使用 `localhost` 也可以

### 性能优化
- 使用 `React.lazy()` 懒加载 3D 组件
- 降低手机端的渲染质量
- 预加载关键资源

### 兼容性
- **iOS Safari**：支持
- **Android Chrome**：支持
- **微信内置浏览器**：可能需要用户手动允许摄像头
- **其他浏览器**：基本支持，但可能有差异

## 🐛 常见问题

### 摄像头不工作
1. **检查权限**：确保允许摄像头访问
2. **检查协议**：必须是 HTTPS 或 localhost
3. **检查浏览器**：某些浏览器可能不支持
4. **使用触摸**：作为备用交互方式

### 性能问题
1. **关闭其他应用**：释放内存
2. **良好网络**：确保资源加载顺畅
3. **充足电量**：3D 渲染比较耗电

### 显示问题
1. **竖屏使用**：横屏可能显示异常
2. **全屏浏览**：避免地址栏遮挡
3. **刷新页面**：如果出现问题可以刷新

## 📊 测试清单

### 功能测试
- [ ] 摄像头权限请求
- [ ] 手势识别准确性
- [ ] 触摸交互备用方案
- [ ] 3D 场景渲染
- [ ] 照片弹窗显示

### 兼容性测试
- [ ] iPhone Safari
- [ ] Android Chrome
- [ ] 微信浏览器
- [ ] 其他移动浏览器

### 性能测试
- [ ] 加载速度
- [ ] 帧率稳定性
- [ ] 电池消耗
- [ ] 内存使用